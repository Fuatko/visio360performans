(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,25652,e=>{"use strict";let a=(0,e.i(75254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>a],25652)},61911,e=>{"use strict";let a=(0,e.i(75254).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["Users",()=>a],61911)},14416,e=>{"use strict";var a=e.i(43476),t=e.i(71645);e.i(16787);var s=e.i(15288),r=e.i(87486),l=e.i(7471),i=e.i(35960),d=e.i(17923),n=e.i(25652),c=e.i(61911),o=e.i(20278);let m=(0,e.i(75254).default)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);var x=e.i(31278);function u(){let{user:e}=(0,i.useAuthStore)(),[u,h]=(0,t.useState)([]),[g,v]=(0,t.useState)(!0),[p,j]=(0,t.useState)(null);(0,t.useEffect)(()=>{e&&b()},[e]);let b=async()=>{if(e)try{let{data:a}=await l.supabase.from("evaluation_assignments").select(`
          *,
          evaluator:evaluator_id(name),
          evaluation_periods(id, name)
        `).eq("target_id",e.id).eq("status","completed").order("completed_at",{ascending:!1});if(!a||0===a.length){h([]),v(!1);return}let t=a.map(e=>e.id),{data:s}=await l.supabase.from("evaluation_responses").select("*").in("assignment_id",t),r={};a.forEach(e=>{let a=e.evaluation_periods?.id,t=e.evaluation_periods?.name||"-";if(!a)return;r[a]||(r[a]={periodId:a,periodName:t,overallAvg:0,selfScore:0,peerAvg:0,evaluations:[],categoryAverages:[]});let l=(s||[]).filter(a=>a.assignment_id===e.id),i={},d=0,n=0;l.forEach(e=>{let a=e.category_name||"Genel";i[a]||(i[a]={total:0,count:0}),i[a].total+=e.reel_score||e.std_score||0,i[a].count++,d+=e.reel_score||e.std_score||0,n++});let c=Object.entries(i).map(([e,a])=>({name:e,score:a.count>0?Math.round(a.total/a.count*10)/10:0})),o=n>0?Math.round(d/n*10)/10:0,m=e.evaluator_id===e.target_id;r[a].evaluations.push({evaluatorName:e.evaluator?.name||"-",isSelf:m,avgScore:o,categories:c,completedAt:e.completed_at})}),Object.values(r).forEach(e=>{let a=e.evaluations.find(e=>e.isSelf),t=e.evaluations.filter(e=>!e.isSelf);e.selfScore=a?.avgScore||0,e.peerAvg=t.length>0?Math.round(t.reduce((e,a)=>e+a.avgScore,0)/t.length*10)/10:0,e.overallAvg=Math.round((.3*e.selfScore+.7*e.peerAvg)*10)/10||e.peerAvg||e.selfScore;let s={};e.evaluations.forEach(e=>{e.categories.forEach(e=>{s[e.name]||(s[e.name]={total:0,count:0}),s[e.name].total+=e.score,s[e.name].count++})}),e.categoryAverages=Object.entries(s).map(([e,a])=>({name:e,score:Math.round(a.total/a.count*10)/10})).sort((e,a)=>a.score-e.score)}),h(Object.values(r)),Object.values(r).length>0&&j(Object.values(r)[0].periodId)}catch(e){console.error("Results error:",e)}finally{v(!1)}},f=e=>e>=4?"success":e>=3?"info":e>=2?"warning":"danger",y=u.find(e=>e.periodId===p);return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"ðŸ“Š SonuÃ§larÄ±m"}),(0,a.jsx)("p",{className:"text-gray-500 mt-1",children:"Performans deÄŸerlendirme sonuÃ§larÄ±nÄ±z"})]}),g?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(x.Loader2,{className:"w-8 h-8 animate-spin text-blue-600"})}):0===u.length?(0,a.jsx)(s.Card,{children:(0,a.jsxs)(s.CardBody,{className:"py-12 text-center text-gray-500",children:[(0,a.jsx)(d.BarChart3,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,a.jsx)("p",{children:"HenÃ¼z tamamlanmÄ±ÅŸ deÄŸerlendirme sonucu yok"}),(0,a.jsx)("p",{className:"text-sm mt-2",children:"DeÄŸerlendirmeler tamamlandÄ±ÄŸÄ±nda sonuÃ§larÄ±nÄ±z burada gÃ¶rÃ¼necek"})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:u.map(e=>(0,a.jsx)("button",{onClick:()=>j(e.periodId),className:`px-4 py-2.5 rounded-xl font-medium text-sm whitespace-nowrap transition-all ${p===e.periodId?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-600 border border-gray-200 hover:bg-gray-50"}`,children:e.periodName},e.periodId))}),y&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 p-5 rounded-2xl text-white",children:[(0,a.jsx)(m,{className:"w-6 h-6 opacity-80 mb-2"}),(0,a.jsx)("div",{className:"text-3xl font-bold",children:y.overallAvg}),(0,a.jsx)("div",{className:"text-sm opacity-80",children:"Genel Ortalama"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-5 rounded-2xl text-white",children:[(0,a.jsx)(o.Target,{className:"w-6 h-6 opacity-80 mb-2"}),(0,a.jsx)("div",{className:"text-3xl font-bold",children:y.selfScore||"-"}),(0,a.jsx)("div",{className:"text-sm opacity-80",children:"Ã–z DeÄŸerlendirme"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 p-5 rounded-2xl text-white",children:[(0,a.jsx)(c.Users,{className:"w-6 h-6 opacity-80 mb-2"}),(0,a.jsx)("div",{className:"text-3xl font-bold",children:y.peerAvg||"-"}),(0,a.jsx)("div",{className:"text-sm opacity-80",children:"Peer Ortalama"})]}),(0,a.jsxs)("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 p-5 rounded-2xl text-white",children:[(0,a.jsx)(n.TrendingUp,{className:"w-6 h-6 opacity-80 mb-2"}),(0,a.jsx)("div",{className:"text-3xl font-bold",children:y.evaluations.length}),(0,a.jsx)("div",{className:"text-sm opacity-80",children:"DeÄŸerlendirme SayÄ±sÄ±"})]})]}),(0,a.jsxs)(s.Card,{className:"mb-6",children:[(0,a.jsx)(s.CardHeader,{children:(0,a.jsx)(s.CardTitle,{children:"ðŸ“ˆ Kategori BazlÄ± SonuÃ§lar"})}),(0,a.jsx)(s.CardBody,{children:(0,a.jsx)("div",{className:"space-y-4",children:y.categoryAverages.map((e,t)=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:e.name}),(0,a.jsx)(r.Badge,{variant:f(e.score),children:e.score})]}),(0,a.jsx)("div",{className:"bg-gray-100 rounded-full h-3 overflow-hidden",children:(0,a.jsx)("div",{className:`h-full rounded-full transition-all ${e.score>=4?"bg-emerald-500":e.score>=3?"bg-blue-500":e.score>=2?"bg-amber-500":"bg-red-500"}`,style:{width:`${e.score/5*100}%`}})})]},t))})})]}),(0,a.jsxs)(s.Card,{children:[(0,a.jsxs)(s.CardHeader,{children:[(0,a.jsx)(s.CardTitle,{children:"ðŸ‘¥ DeÄŸerlendirme DetaylarÄ±"}),(0,a.jsxs)(r.Badge,{variant:"info",children:[y.evaluations.length," deÄŸerlendirme"]})]}),(0,a.jsx)(s.CardBody,{className:"p-0",children:(0,a.jsx)("div",{className:"divide-y divide-gray-100",children:y.evaluations.map((e,t)=>(0,a.jsxs)("div",{className:"px-6 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${e.isSelf?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:e.isSelf?"ðŸ”µ":"ðŸ‘¤"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.isSelf?"Ã–z DeÄŸerlendirme":e.evaluatorName}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:new Date(e.completedAt).toLocaleDateString("tr-TR")})]})]}),(0,a.jsx)(r.Badge,{variant:f(e.avgScore),className:"text-lg px-4 py-1",children:e.avgScore})]}),e.categories.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-3",children:e.categories.map((e,t)=>{var s;return(0,a.jsxs)("div",{className:"bg-gray-50 px-3 py-2 rounded-lg flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs text-gray-600 truncate",children:e.name}),(0,a.jsx)("span",{className:`text-sm font-semibold ${(s=e.score)>=4?"text-emerald-600":s>=3?"text-blue-600":s>=2?"text-amber-600":"text-red-600"}`,children:e.score})]},t)})})]},t))})})]})]})]})]})}e.s(["default",()=>u],14416)}]);