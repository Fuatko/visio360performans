(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,7233,27612,e=>{"use strict";var a=e.i(75254);let t=(0,a.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],7233);let l=(0,a.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>l],27612)},92930,e=>{"use strict";let a=(0,e.i(75254).default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["Edit2",()=>a],92930)},55436,e=>{"use strict";let a=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["Search",()=>a],55436)},99274,e=>{"use strict";var a=e.i(43476),t=e.i(71645);e.i(16787);var l=e.i(15288),s=e.i(19455),r=e.i(93479),i=e.i(67489),n=e.i(87486),o=e.i(73635),d=e.i(7471),c=e.i(7233),m=e.i(55436),u=e.i(92930),x=e.i(27612),h=e.i(37727),p=e.i(31278);function g(){let[e,g]=(0,t.useState)([]),[v,y]=(0,t.useState)([]),[j,b]=(0,t.useState)(!0),[f,N]=(0,t.useState)(""),[w,S]=(0,t.useState)(""),[C,k]=(0,t.useState)(""),[_,z]=(0,t.useState)([]),[K,A]=(0,t.useState)(!1),[T,B]=(0,t.useState)(null),[L,M]=(0,t.useState)({name:"",email:"",phone:"",organization_id:"",title:"",department:"",position_level:"peer",role:"user",status:"active",preferred_language:"tr"}),[X,D]=(0,t.useState)(!1);(0,t.useEffect)(()=>{E()},[]);let E=async()=>{b(!0);try{let[e,a]=await Promise.all([d.supabase.from("users").select("*, organizations(*)").order("name"),d.supabase.from("organizations").select("*").order("name")]);g(e.data||[]),y(a.data||[]);let t=[...new Set((e.data||[]).map(e=>e.department).filter(Boolean))];z(t.sort())}catch(e){console.error("Load error:",e),(0,o.toast)("Veriler yÃ¼klenemedi","error")}finally{b(!1)}},P=e.filter(e=>{let a=e.name.toLowerCase().includes(f.toLowerCase())||e.email.toLowerCase().includes(f.toLowerCase()),t=!w||e.organization_id===w,l=!C||e.department===C;return a&&t&&l}),Y=e=>{e?(B(e),M({name:e.name,email:e.email,phone:e.phone||"",organization_id:e.organization_id||"",title:e.title||"",department:e.department||"",position_level:e.position_level,role:e.role,status:e.status,preferred_language:e.preferred_language})):(B(null),M({name:"",email:"",phone:"",organization_id:"",title:"",department:"",position_level:"peer",role:"user",status:"active",preferred_language:"tr"})),A(!0)},I=async()=>{if(!L.name.trim()||!L.email.trim())return void(0,o.toast)("Ad ve email zorunludur","error");D(!0);try{let e={...L,email:L.email.toLowerCase().trim(),organization_id:L.organization_id||null,phone:L.phone||null,title:L.title||null,department:L.department||null};if(T){let{error:a}=await d.supabase.from("users").update(e).eq("id",T.id);if(a)throw a;(0,o.toast)("KullanÄ±cÄ± gÃ¼ncellendi","success")}else{let{error:a}=await d.supabase.from("users").insert(e);if(a)throw a;(0,o.toast)("KullanÄ±cÄ± eklendi","success")}A(!1),E()}catch(e){console.error("Save error:",e),(0,o.toast)(e.message||"KayÄ±t hatasÄ±","error")}finally{D(!1)}},R=async e=>{if(confirm(`${e.name} kullanÄ±cÄ±sÄ±nÄ± silmek istediÄŸinize emin misiniz?`))try{let{error:a}=await d.supabase.from("users").delete().eq("id",e.id);if(a)throw a;(0,o.toast)("KullanÄ±cÄ± silindi","success"),E()}catch(e){(0,o.toast)(e.message||"Silme hatasÄ±","error")}},U={executive:"ðŸ‘” Ãœst YÃ¶netici",manager:"ðŸ‘¨â€ðŸ’¼ YÃ¶netici",peer:"ðŸ‘¥ EÅŸ DÃ¼zey",subordinate:"ðŸ‘¤ Ast"},V={super_admin:"ðŸ”´ Super Admin",org_admin:"ðŸŸ  Kurum Admin",user:"ðŸŸ¢ KullanÄ±cÄ±"};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"ðŸ‘¥ KullanÄ±cÄ±lar"}),(0,a.jsx)("p",{className:"text-gray-500 mt-1",children:"Sistem kullanÄ±cÄ±larÄ±nÄ± yÃ¶netin"})]}),(0,a.jsxs)(s.Button,{onClick:()=>Y(),children:[(0,a.jsx)(c.Plus,{className:"w-5 h-5"}),"Yeni KullanÄ±cÄ±"]})]}),(0,a.jsx)(l.Card,{className:"mb-6",children:(0,a.jsx)(l.CardBody,{children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,a.jsx)("div",{className:"flex-1 min-w-[200px]",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(m.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Ä°sim veya email ara...",value:f,onChange:e=>N(e.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"})]})}),(0,a.jsx)(i.Select,{options:v.map(e=>({value:e.id,label:e.name})),value:w,onChange:e=>S(e.target.value),placeholder:"TÃ¼m Kurumlar",className:"w-48"}),(0,a.jsx)(i.Select,{options:_.map(e=>({value:e,label:e})),value:C,onChange:e=>k(e.target.value),placeholder:"TÃ¼m Departmanlar",className:"w-48"})]})})}),(0,a.jsx)(l.Card,{children:(0,a.jsx)(l.CardBody,{className:"p-0",children:j?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(p.Loader2,{className:"w-8 h-8 animate-spin text-blue-600"})}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b border-gray-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"text-left py-4 px-6 font-semibold text-gray-600 text-sm",children:"Ad Soyad"}),(0,a.jsx)("th",{className:"text-left py-4 px-6 font-semibold text-gray-600 text-sm",children:"Email"}),(0,a.jsx)("th",{className:"text-left py-4 px-6 font-semibold text-gray-600 text-sm",children:"Kurum"}),(0,a.jsx)("th",{className:"text-left py-4 px-6 font-semibold text-gray-600 text-sm",children:"Departman"}),(0,a.jsx)("th",{className:"text-left py-4 px-6 font-semibold text-gray-600 text-sm",children:"Pozisyon"}),(0,a.jsx)("th",{className:"text-left py-4 px-6 font-semibold text-gray-600 text-sm",children:"Rol"}),(0,a.jsx)("th",{className:"text-left py-4 px-6 font-semibold text-gray-600 text-sm",children:"Durum"}),(0,a.jsx)("th",{className:"text-right py-4 px-6 font-semibold text-gray-600 text-sm",children:"Ä°ÅŸlem"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-100",children:0===P.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:8,className:"py-12 text-center text-gray-500",children:"KullanÄ±cÄ± bulunamadÄ±"})}):P.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("td",{className:"py-4 px-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-9 h-9 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600 font-semibold text-sm",children:e.name.split(" ").map(e=>e[0]).join("").substring(0,2)}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.name})]})}),(0,a.jsx)("td",{className:"py-4 px-6 text-gray-600 text-sm",children:e.email}),(0,a.jsx)("td",{className:"py-4 px-6 text-gray-600 text-sm",children:e.organizations?.name||"-"}),(0,a.jsx)("td",{className:"py-4 px-6 text-gray-600 text-sm",children:e.department||"-"}),(0,a.jsx)("td",{className:"py-4 px-6",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"text-gray-900 text-sm",children:e.title||"-"}),(0,a.jsx)("div",{children:(0,a.jsx)(n.Badge,{variant:"gray",children:U[e.position_level]})})]})}),(0,a.jsx)("td",{className:"py-4 px-6",children:(0,a.jsx)(n.Badge,{variant:"super_admin"===e.role?"danger":"org_admin"===e.role?"warning":"default",children:V[e.role]})}),(0,a.jsx)("td",{className:"py-4 px-6",children:(0,a.jsx)(n.Badge,{variant:"active"===e.status?"success":"gray",children:"active"===e.status?"Aktif":"Pasif"})}),(0,a.jsx)("td",{className:"py-4 px-6 text-right",children:(0,a.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,a.jsx)("button",{onClick:()=>Y(e),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:(0,a.jsx)(u.Edit2,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:()=>R(e),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:(0,a.jsx)(x.Trash2,{className:"w-4 h-4"})})]})})]},e.id))})]})})})}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-4",children:["Toplam ",P.length," kullanÄ±cÄ± gÃ¶steriliyor"]}),K&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:T?"KullanÄ±cÄ± DÃ¼zenle":"Yeni KullanÄ±cÄ±"}),(0,a.jsx)("button",{onClick:()=>A(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:(0,a.jsx)(h.X,{className:"w-5 h-5"})})]}),(0,a.jsxs)("div",{className:"p-6 space-y-4",children:[(0,a.jsx)(r.Input,{label:"Ad Soyad *",value:L.name,onChange:e=>M({...L,name:e.target.value}),placeholder:"Ã–rn: Ahmet YÄ±lmaz"}),(0,a.jsx)(r.Input,{label:"Email *",type:"email",value:L.email,onChange:e=>M({...L,email:e.target.value}),placeholder:"ornek@email.com"}),(0,a.jsx)(r.Input,{label:"Telefon",value:L.phone,onChange:e=>M({...L,phone:e.target.value}),placeholder:"+90 5XX XXX XX XX"}),(0,a.jsx)(i.Select,{label:"Kurum",options:v.map(e=>({value:e.id,label:e.name})),value:L.organization_id,onChange:e=>M({...L,organization_id:e.target.value}),placeholder:"Kurum SeÃ§in"}),(0,a.jsx)(r.Input,{label:"GÃ¶rev / Unvan",value:L.title,onChange:e=>M({...L,title:e.target.value}),placeholder:"Ã–rn: YazÄ±lÄ±m MÃ¼hendisi"}),(0,a.jsx)(r.Input,{label:"Departman",value:L.department,onChange:e=>M({...L,department:e.target.value}),placeholder:"Ã–rn: BiliÅŸim Teknolojileri"}),(0,a.jsx)(i.Select,{label:"Pozisyon Seviyesi",options:[{value:"executive",label:"ðŸ‘” Ãœst YÃ¶netici (C-Level)"},{value:"manager",label:"ðŸ‘¨â€ðŸ’¼ YÃ¶netici / MÃ¼dÃ¼r"},{value:"peer",label:"ðŸ‘¥ Uzman / EÅŸ DÃ¼zey"},{value:"subordinate",label:"ðŸ‘¤ Asistan / Stajyer"}],value:L.position_level,onChange:e=>M({...L,position_level:e.target.value})}),(0,a.jsx)(i.Select,{label:"Rol",options:[{value:"user",label:"ðŸŸ¢ KullanÄ±cÄ±"},{value:"org_admin",label:"ðŸŸ  Kurum YÃ¶neticisi"},{value:"super_admin",label:"ðŸ”´ Super Admin"}],value:L.role,onChange:e=>M({...L,role:e.target.value})}),(0,a.jsx)(i.Select,{label:"Durum",options:[{value:"active",label:"âœ… Aktif"},{value:"inactive",label:"âŒ Pasif"}],value:L.status,onChange:e=>M({...L,status:e.target.value})}),(0,a.jsx)(i.Select,{label:"Tercih Edilen Dil",options:[{value:"tr",label:"ðŸ‡¹ðŸ‡· TÃ¼rkÃ§e"},{value:"en",label:"ðŸ‡¬ðŸ‡§ English"},{value:"fr",label:"ðŸ‡«ðŸ‡· FranÃ§ais"}],value:L.preferred_language,onChange:e=>M({...L,preferred_language:e.target.value})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-100",children:[(0,a.jsx)(s.Button,{variant:"secondary",onClick:()=>A(!1),children:"Ä°ptal"}),(0,a.jsx)(s.Button,{onClick:I,disabled:X,children:X?(0,a.jsx)(p.Loader2,{className:"w-5 h-5 animate-spin"}):"Kaydet"})]})]})})]})}e.s(["default",()=>g])}]);