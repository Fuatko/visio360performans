(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,25652,e=>{"use strict";let s=(0,e.i(75254).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);e.s(["TrendingUp",()=>s],25652)},3116,e=>{"use strict";let s=(0,e.i(75254).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>s],3116)},31643,e=>{"use strict";var s=e.i(43476),a=e.i(71645);e.i(16787);var t=e.i(15288),l=e.i(87486),r=e.i(7471),i=e.i(35960),n=e.i(7486),c=e.i(61911),d=e.i(87316),o=e.i(20278),m=e.i(69638),u=e.i(3116),x=e.i(25652),h=e.i(17923);function g(){let{user:e}=(0,i.useAuthStore)(),[g,p]=(0,a.useState)({organizations:0,users:0,periods:0,assignments:0,completed:0,pending:0}),[j,f]=(0,a.useState)([]),[v,y]=(0,a.useState)(!0);(0,a.useEffect)(()=>{b()},[]);let b=async()=>{try{let[e,s,a,t]=await Promise.all([r.supabase.from("organizations").select("id",{count:"exact"}),r.supabase.from("users").select("id",{count:"exact"}).eq("status","active"),r.supabase.from("evaluation_periods").select("id",{count:"exact"}),r.supabase.from("evaluation_assignments").select("id, status",{count:"exact"})]),l=t.data||[],i=l.filter(e=>"completed"===e.status).length,n=l.filter(e=>"pending"===e.status).length;p({organizations:e.count||0,users:s.count||0,periods:a.count||0,assignments:t.count||0,completed:i,pending:n});let{data:c}=await r.supabase.from("evaluation_assignments").select(`
          *,
          evaluator:evaluator_id(name, department),
          target:target_id(name, department),
          evaluation_periods(name)
        `).order("created_at",{ascending:!1}).limit(10);f(c||[])}catch(e){console.error("Dashboard error:",e)}finally{y(!1)}},N=g.assignments>0?Math.round(g.completed/g.assignments*100):0,w=[{title:"Kurumlar",value:g.organizations,icon:n.Building2,color:"from-blue-500 to-blue-600",shadow:"shadow-blue-500/25"},{title:"Kullanıcılar",value:g.users,icon:c.Users,color:"from-emerald-500 to-emerald-600",shadow:"shadow-emerald-500/25"},{title:"Aktif Dönemler",value:g.periods,icon:d.Calendar,color:"from-purple-500 to-purple-600",shadow:"shadow-purple-500/25"},{title:"Toplam Atama",value:g.assignments,icon:o.Target,color:"from-amber-500 to-amber-600",shadow:"shadow-amber-500/25"},{title:"Tamamlanan",value:g.completed,icon:m.CheckCircle,color:"from-green-500 to-green-600",shadow:"shadow-green-500/25"},{title:"Bekleyen",value:g.pending,icon:u.Clock,color:"from-orange-500 to-orange-600",shadow:"shadow-orange-500/25"}];return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),(0,s.jsxs)("p",{className:"text-gray-500 mt-1",children:["Hoş geldiniz, ",e?.name,"! Sistem durumuna genel bakış."]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4 mb-8",children:w.map((e,a)=>{let t=e.icon;return(0,s.jsxs)("div",{className:`bg-gradient-to-br ${e.color} p-5 rounded-2xl text-white shadow-lg ${e.shadow}`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsx)(t,{className:"w-6 h-6 opacity-80"}),(0,s.jsx)(x.TrendingUp,{className:"w-4 h-4 opacity-60"})]}),(0,s.jsx)("div",{className:"text-3xl font-bold",children:e.value}),(0,s.jsx)("div",{className:"text-sm opacity-80 mt-1",children:e.title})]},a)})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{children:(0,s.jsxs)(t.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(h.BarChart3,{className:"w-5 h-5 text-blue-600"}),"Tamamlanma Oranı"]})}),(0,s.jsx)(t.CardBody,{children:(0,s.jsxs)("div",{className:"flex flex-col items-center py-4",children:[(0,s.jsxs)("div",{className:"relative w-32 h-32",children:[(0,s.jsxs)("svg",{className:"w-full h-full transform -rotate-90",children:[(0,s.jsx)("circle",{cx:"64",cy:"64",r:"56",stroke:"#e5e7eb",strokeWidth:"12",fill:"none"}),(0,s.jsx)("circle",{cx:"64",cy:"64",r:"56",stroke:N>=70?"#10b981":N>=40?"#f59e0b":"#ef4444",strokeWidth:"12",fill:"none",strokeLinecap:"round",strokeDasharray:`${3.52*N} 352`})]}),(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,s.jsxs)("span",{className:"text-3xl font-bold text-gray-900",children:[N,"%"]})})]}),(0,s.jsx)("div",{className:"mt-4 text-center",children:(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[g.completed," / ",g.assignments," değerlendirme tamamlandı"]})})]})})]}),(0,s.jsxs)(t.Card,{className:"lg:col-span-2",children:[(0,s.jsx)(t.CardHeader,{children:(0,s.jsxs)(t.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(u.Clock,{className:"w-5 h-5 text-blue-600"}),"Son Değerlendirmeler"]})}),(0,s.jsx)(t.CardBody,{className:"p-0",children:(0,s.jsx)("div",{className:"divide-y divide-gray-100",children:0===j.length?(0,s.jsx)("div",{className:"p-6 text-center text-gray-500",children:"Henüz değerlendirme yok"}):j.slice(0,5).map(e=>(0,s.jsxs)("div",{className:"px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center",children:(0,s.jsx)(o.Target,{className:"w-5 h-5 text-blue-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-medium text-gray-900",children:[e.evaluator?.name||"-",(0,s.jsx)("span",{className:"text-gray-400 mx-2",children:"→"}),e.target?.name||"-"]}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.evaluation_periods?.name||"-"})]})]}),(0,s.jsx)(l.Badge,{variant:"completed"===e.status?"success":"warning",children:"completed"===e.status?"✅ Tamamlandı":"⏳ Bekliyor"})]},e.id))})})]})]})]})}e.s(["default",()=>g])}]);