module.exports=[24669,a=>{"use strict";let b=(0,a.i(70106).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);a.s(["TrendingUp",()=>b],24669)},60246,a=>{"use strict";let b=(0,a.i(70106).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);a.s(["Users",()=>b],60246)},91664,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(11909);var d=a.i(91119),e=a.i(86304),f=a.i(10849),g=a.i(74625),h=a.i(39761),i=a.i(24669),j=a.i(60246),k=a.i(50429);let l=(0,a.i(70106).default)("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);var m=a.i(96221);function n(){let{user:a}=(0,g.useAuthStore)(),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(null);(0,c.useEffect)(()=>{a&&t()},[a]);let t=async()=>{if(a)try{let{data:b}=await f.supabase.from("evaluation_assignments").select(`
          *,
          evaluator:evaluator_id(name),
          evaluation_periods(id, name)
        `).eq("target_id",a.id).eq("status","completed").order("completed_at",{ascending:!1});if(!b||0===b.length){o([]),q(!1);return}let c=b.map(a=>a.id),{data:d}=await f.supabase.from("evaluation_responses").select("*").in("assignment_id",c),e={};b.forEach(a=>{let b=a.evaluation_periods?.id,c=a.evaluation_periods?.name||"-";if(!b)return;e[b]||(e[b]={periodId:b,periodName:c,overallAvg:0,selfScore:0,peerAvg:0,evaluations:[],categoryAverages:[]});let f=(d||[]).filter(b=>b.assignment_id===a.id),g={},h=0,i=0;f.forEach(a=>{let b=a.category_name||"Genel";g[b]||(g[b]={total:0,count:0}),g[b].total+=a.reel_score||a.std_score||0,g[b].count++,h+=a.reel_score||a.std_score||0,i++});let j=Object.entries(g).map(([a,b])=>({name:a,score:b.count>0?Math.round(b.total/b.count*10)/10:0})),k=i>0?Math.round(h/i*10)/10:0,l=a.evaluator_id===a.target_id;e[b].evaluations.push({evaluatorName:a.evaluator?.name||"-",isSelf:l,avgScore:k,categories:j,completedAt:a.completed_at})}),Object.values(e).forEach(a=>{let b=a.evaluations.find(a=>a.isSelf),c=a.evaluations.filter(a=>!a.isSelf);a.selfScore=b?.avgScore||0,a.peerAvg=c.length>0?Math.round(c.reduce((a,b)=>a+b.avgScore,0)/c.length*10)/10:0,a.overallAvg=Math.round((.3*a.selfScore+.7*a.peerAvg)*10)/10||a.peerAvg||a.selfScore;let d={};a.evaluations.forEach(a=>{a.categories.forEach(a=>{d[a.name]||(d[a.name]={total:0,count:0}),d[a.name].total+=a.score,d[a.name].count++})}),a.categoryAverages=Object.entries(d).map(([a,b])=>({name:a,score:Math.round(b.total/b.count*10)/10})).sort((a,b)=>b.score-a.score)}),o(Object.values(e)),Object.values(e).length>0&&s(Object.values(e)[0].periodId)}catch(a){console.error("Results error:",a)}finally{q(!1)}},u=a=>a>=4?"success":a>=3?"info":a>=2?"warning":"danger",v=n.find(a=>a.periodId===r);return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"ðŸ“Š SonuÃ§larÄ±m"}),(0,b.jsx)("p",{className:"text-gray-500 mt-1",children:"Performans deÄŸerlendirme sonuÃ§larÄ±nÄ±z"})]}),p?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)(m.Loader2,{className:"w-8 h-8 animate-spin text-blue-600"})}):0===n.length?(0,b.jsx)(d.Card,{children:(0,b.jsxs)(d.CardBody,{className:"py-12 text-center text-gray-500",children:[(0,b.jsx)(h.BarChart3,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),(0,b.jsx)("p",{children:"HenÃ¼z tamamlanmÄ±ÅŸ deÄŸerlendirme sonucu yok"}),(0,b.jsx)("p",{className:"text-sm mt-2",children:"DeÄŸerlendirmeler tamamlandÄ±ÄŸÄ±nda sonuÃ§larÄ±nÄ±z burada gÃ¶rÃ¼necek"})]})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:n.map(a=>(0,b.jsx)("button",{onClick:()=>s(a.periodId),className:`px-4 py-2.5 rounded-xl font-medium text-sm whitespace-nowrap transition-all ${r===a.periodId?"bg-blue-600 text-white shadow-lg":"bg-white text-gray-600 border border-gray-200 hover:bg-gray-50"}`,children:a.periodName},a.periodId))}),v&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 p-5 rounded-2xl text-white",children:[(0,b.jsx)(l,{className:"w-6 h-6 opacity-80 mb-2"}),(0,b.jsx)("div",{className:"text-3xl font-bold",children:v.overallAvg}),(0,b.jsx)("div",{className:"text-sm opacity-80",children:"Genel Ortalama"})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 p-5 rounded-2xl text-white",children:[(0,b.jsx)(k.Target,{className:"w-6 h-6 opacity-80 mb-2"}),(0,b.jsx)("div",{className:"text-3xl font-bold",children:v.selfScore||"-"}),(0,b.jsx)("div",{className:"text-sm opacity-80",children:"Ã–z DeÄŸerlendirme"})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 p-5 rounded-2xl text-white",children:[(0,b.jsx)(j.Users,{className:"w-6 h-6 opacity-80 mb-2"}),(0,b.jsx)("div",{className:"text-3xl font-bold",children:v.peerAvg||"-"}),(0,b.jsx)("div",{className:"text-sm opacity-80",children:"Peer Ortalama"})]}),(0,b.jsxs)("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 p-5 rounded-2xl text-white",children:[(0,b.jsx)(i.TrendingUp,{className:"w-6 h-6 opacity-80 mb-2"}),(0,b.jsx)("div",{className:"text-3xl font-bold",children:v.evaluations.length}),(0,b.jsx)("div",{className:"text-sm opacity-80",children:"DeÄŸerlendirme SayÄ±sÄ±"})]})]}),(0,b.jsxs)(d.Card,{className:"mb-6",children:[(0,b.jsx)(d.CardHeader,{children:(0,b.jsx)(d.CardTitle,{children:"ðŸ“ˆ Kategori BazlÄ± SonuÃ§lar"})}),(0,b.jsx)(d.CardBody,{children:(0,b.jsx)("div",{className:"space-y-4",children:v.categoryAverages.map((a,c)=>(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"font-medium text-gray-700",children:a.name}),(0,b.jsx)(e.Badge,{variant:u(a.score),children:a.score})]}),(0,b.jsx)("div",{className:"bg-gray-100 rounded-full h-3 overflow-hidden",children:(0,b.jsx)("div",{className:`h-full rounded-full transition-all ${a.score>=4?"bg-emerald-500":a.score>=3?"bg-blue-500":a.score>=2?"bg-amber-500":"bg-red-500"}`,style:{width:`${a.score/5*100}%`}})})]},c))})})]}),(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"ðŸ‘¥ DeÄŸerlendirme DetaylarÄ±"}),(0,b.jsxs)(e.Badge,{variant:"info",children:[v.evaluations.length," deÄŸerlendirme"]})]}),(0,b.jsx)(d.CardBody,{className:"p-0",children:(0,b.jsx)("div",{className:"divide-y divide-gray-100",children:v.evaluations.map((a,c)=>(0,b.jsxs)("div",{className:"px-6 py-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${a.isSelf?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:a.isSelf?"ðŸ”µ":"ðŸ‘¤"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:a.isSelf?"Ã–z DeÄŸerlendirme":a.evaluatorName}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:new Date(a.completedAt).toLocaleDateString("tr-TR")})]})]}),(0,b.jsx)(e.Badge,{variant:u(a.avgScore),className:"text-lg px-4 py-1",children:a.avgScore})]}),a.categories.length>0&&(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-3",children:a.categories.map((a,c)=>{var d;return(0,b.jsxs)("div",{className:"bg-gray-50 px-3 py-2 rounded-lg flex items-center justify-between",children:[(0,b.jsx)("span",{className:"text-xs text-gray-600 truncate",children:a.name}),(0,b.jsx)("span",{className:`text-sm font-semibold ${(d=a.score)>=4?"text-emerald-600":d>=3?"text-blue-600":d>=2?"text-amber-600":"text-red-600"}`,children:a.score})]},c)})})]},c))})})]})]})]})]})}a.s(["default",()=>n],91664)}];

//# sourceMappingURL=_92215139._.js.map