module.exports=[45803,a=>{"use strict";var b=a.i(87924),c=a.i(72131);a.i(11909);var d=a.i(91119),e=a.i(99570),f=a.i(66718),g=a.i(80701),h=a.i(86304),i=a.i(69769),j=a.i(10849),k=a.i(15618),l=a.i(10448),m=a.i(81560),n=a.i(33508),o=a.i(96221),p=a.i(50522),q=a.i(53722),r=a.i(70106);let s=(0,r.default)("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var t=a.i(49447);let u=(0,r.default)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);function v(){let[a,r]=(0,c.useState)("main"),[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)([]),[B,C]=(0,c.useState)([]),[D,E]=(0,c.useState)([]),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)("main"),[P,Q]=(0,c.useState)(null),[R,S]=(0,c.useState)(!1),[T,U]=(0,c.useState)({});(0,c.useEffect)(()=>{V()},[]);let V=async()=>{w(!0);try{let[a,b,c,d]=await Promise.all([j.supabase.from("main_categories").select("*").order("name"),j.supabase.from("categories").select("*, main_categories(*)").order("name"),j.supabase.from("questions").select("*, categories(*, main_categories(*))").order("order_num"),j.supabase.from("answers").select("*").order("order_num")]);y(a.data||[]),A(b.data||[]),C(c.data||[]),E(d.data||[])}catch(a){console.error("Load error:",a),(0,i.toast)("Veriler yÃ¼klenemedi","error")}finally{w(!1)}},W=z.filter(a=>!F||a.main_category_id===F),X=B.filter(a=>!H||a.category_id===H),Y=D.filter(a=>!J||a.question_id===J),Z=(a,b)=>{if(O(a),Q(b||null),b)U({...b});else switch(a){case"main":U({name:"",description:"",status:"active"});break;case"categories":U({name:"",main_category_id:F||""});break;case"questions":U({text:"",category_id:H||"",order_num:B.length+1});break;case"answers":U({text:"",question_id:J||"",std_score:1,reel_score:1,order_num:1})}M(!0)},$=async()=>{S(!0);try{let a="",b={};switch(N){case"main":a="main_categories",b={name:T.name,description:T.description||null,status:T.status};break;case"categories":if(a="categories",!T.main_category_id){(0,i.toast)("Ana baÅŸlÄ±k seÃ§in","error"),S(!1);return}b={name:T.name,main_category_id:T.main_category_id};break;case"questions":if(a="questions",!T.category_id){(0,i.toast)("Kategori seÃ§in","error"),S(!1);return}b={text:T.text,category_id:T.category_id,order_num:T.order_num||1};break;case"answers":if(a="answers",!T.question_id){(0,i.toast)("Soru seÃ§in","error"),S(!1);return}b={text:T.text,question_id:T.question_id,std_score:Number(T.std_score)||1,reel_score:Number(T.reel_score)||1,order_num:Number(T.order_num)||1}}if(P){let{error:c}=await j.supabase.from(a).update(b).eq("id",P.id);if(c)throw c;(0,i.toast)("GÃ¼ncellendi","success")}else{let{error:c}=await j.supabase.from(a).insert(b);if(c)throw c;(0,i.toast)("Eklendi","success")}M(!1),V()}catch(a){(0,i.toast)(a.message||"KayÄ±t hatasÄ±","error")}finally{S(!1)}},_=async(a,b)=>{if(confirm("Silmek istediÄŸinize emin misiniz?"))try{let{error:c}=await j.supabase.from({main:"main_categories",categories:"categories",questions:"questions",answers:"answers"}[a]).delete().eq("id",b);if(c)throw c;(0,i.toast)("Silindi","success"),V()}catch(a){(0,i.toast)(a.message||"Silme hatasÄ±","error")}},aa=[{id:"main",label:"Ana BaÅŸlÄ±klar",icon:q.BookOpen,count:x.length},{id:"categories",label:"Kategoriler",icon:s,count:z.length},{id:"questions",label:"Sorular",icon:t.HelpCircle,count:B.length},{id:"answers",label:"Cevaplar",icon:u,count:D.length}];return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"â“ Soru YÃ¶netimi"}),(0,b.jsx)("p",{className:"text-gray-500 mt-1",children:"Ana BaÅŸlÄ±k, Kategori, Soru ve Cevap yÃ¶netimi"})]}),(0,b.jsx)("div",{className:"flex gap-2 mb-6 overflow-x-auto pb-2",children:aa.map(c=>{let d=c.icon;return(0,b.jsxs)("button",{onClick:()=>r(c.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl font-medium text-sm whitespace-nowrap transition-all ${a===c.id?"bg-blue-600 text-white shadow-lg shadow-blue-500/25":"bg-white text-gray-600 border border-gray-200 hover:bg-gray-50"}`,children:[(0,b.jsx)(d,{className:"w-4 h-4"}),c.label,(0,b.jsx)("span",{className:`px-2 py-0.5 rounded-full text-xs ${a===c.id?"bg-white/20":"bg-gray-100"}`,children:c.count})]},c.id)})}),v?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)(o.Loader2,{className:"w-8 h-8 animate-spin text-blue-600"})}):(0,b.jsxs)(b.Fragment,{children:["main"===a&&(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"ðŸ“š Ana BaÅŸlÄ±klar"}),(0,b.jsxs)(e.Button,{onClick:()=>Z("main"),children:[(0,b.jsx)(k.Plus,{className:"w-4 h-4"}),"Yeni Ana BaÅŸlÄ±k"]})]}),(0,b.jsx)(d.CardBody,{className:"p-0",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b border-gray-100",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"text-left py-3 px-6 font-semibold text-gray-600 text-sm",children:"#"}),(0,b.jsx)("th",{className:"text-left py-3 px-6 font-semibold text-gray-600 text-sm",children:"Ana BaÅŸlÄ±k"}),(0,b.jsx)("th",{className:"text-left py-3 px-6 font-semibold text-gray-600 text-sm",children:"AÃ§Ä±klama"}),(0,b.jsx)("th",{className:"text-left py-3 px-6 font-semibold text-gray-600 text-sm",children:"Kategori SayÄ±sÄ±"}),(0,b.jsx)("th",{className:"text-left py-3 px-6 font-semibold text-gray-600 text-sm",children:"Durum"}),(0,b.jsx)("th",{className:"text-right py-3 px-6 font-semibold text-gray-600 text-sm",children:"Ä°ÅŸlem"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-100",children:x.map((a,c)=>{let d=z.filter(b=>b.main_category_id===a.id).length;return(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"py-3 px-6 text-gray-500",children:c+1}),(0,b.jsx)("td",{className:"py-3 px-6 font-medium text-gray-900",children:a.name}),(0,b.jsx)("td",{className:"py-3 px-6 text-gray-500 text-sm",children:a.description||"-"}),(0,b.jsx)("td",{className:"py-3 px-6",children:(0,b.jsxs)(h.Badge,{variant:"info",children:[d," kategori"]})}),(0,b.jsx)("td",{className:"py-3 px-6",children:(0,b.jsx)(h.Badge,{variant:"active"===a.status?"success":"gray",children:"active"===a.status?"âœ… Aktif":"âŒ Pasif"})}),(0,b.jsx)("td",{className:"py-3 px-6 text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)("button",{onClick:()=>Z("main",a),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",children:(0,b.jsx)(l.Edit2,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>_("main",a.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:(0,b.jsx)(m.Trash2,{className:"w-4 h-4"})})]})})]},a.id)})})]})})]}),"categories"===a&&(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"ðŸ“ Kategoriler"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(g.Select,{options:x.map(a=>({value:a.id,label:a.name})),value:F,onChange:a=>G(a.target.value),placeholder:"TÃ¼m Ana BaÅŸlÄ±klar",className:"w-48"}),(0,b.jsxs)(e.Button,{onClick:()=>Z("categories"),children:[(0,b.jsx)(k.Plus,{className:"w-4 h-4"}),"Yeni Kategori"]})]})]}),(0,b.jsx)(d.CardBody,{className:"p-0",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b border-gray-100",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"text-left py-3 px-6 font-semibold text-gray-600 text-sm",children:"#"}),(0,b.jsx)("th",{className:"text-left py-3 px-6 font-semibold text-gray-600 text-sm",children:"Ana BaÅŸlÄ±k"}),(0,b.jsx)("th",{className:"text-left py-3 px-6 font-semibold text-gray-600 text-sm",children:"Kategori"}),(0,b.jsx)("th",{className:"text-left py-3 px-6 font-semibold text-gray-600 text-sm",children:"Soru SayÄ±sÄ±"}),(0,b.jsx)("th",{className:"text-right py-3 px-6 font-semibold text-gray-600 text-sm",children:"Ä°ÅŸlem"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-100",children:W.map((a,c)=>{let d=B.filter(b=>b.category_id===a.id).length;return(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"py-3 px-6 text-gray-500",children:c+1}),(0,b.jsx)("td",{className:"py-3 px-6",children:(0,b.jsx)(h.Badge,{variant:"gray",children:a.main_categories?.name||"-"})}),(0,b.jsx)("td",{className:"py-3 px-6 font-medium text-gray-900",children:a.name}),(0,b.jsx)("td",{className:"py-3 px-6",children:(0,b.jsxs)(h.Badge,{variant:"info",children:[d," soru"]})}),(0,b.jsx)("td",{className:"py-3 px-6 text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)("button",{onClick:()=>Z("categories",a),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",children:(0,b.jsx)(l.Edit2,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>_("categories",a.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:(0,b.jsx)(m.Trash2,{className:"w-4 h-4"})})]})})]},a.id)})})]})})]}),"questions"===a&&(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"ðŸ“ Sorular"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(g.Select,{options:z.map(a=>({value:a.id,label:`${a.main_categories?.name} > ${a.name}`})),value:H,onChange:a=>I(a.target.value),placeholder:"TÃ¼m Kategoriler",className:"w-64"}),(0,b.jsxs)(e.Button,{onClick:()=>Z("questions"),children:[(0,b.jsx)(k.Plus,{className:"w-4 h-4"}),"Yeni Soru"]})]})]}),(0,b.jsx)(d.CardBody,{className:"p-0",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b border-gray-100",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"text-left py-3 px-6 font-semibold text-gray-600 text-sm",children:"#"}),(0,b.jsx)("th",{className:"text-left py-3 px-6 font-semibold text-gray-600 text-sm",children:"Kategori"}),(0,b.jsx)("th",{className:"text-left py-3 px-6 font-semibold text-gray-600 text-sm",children:"Soru"}),(0,b.jsx)("th",{className:"text-left py-3 px-6 font-semibold text-gray-600 text-sm",children:"Cevap SayÄ±sÄ±"}),(0,b.jsx)("th",{className:"text-right py-3 px-6 font-semibold text-gray-600 text-sm",children:"Ä°ÅŸlem"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-100",children:X.map((a,c)=>{let d=D.filter(b=>b.question_id===a.id).length;return(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"py-3 px-6 text-gray-500",children:a.order_num||c+1}),(0,b.jsx)("td",{className:"py-3 px-6",children:(0,b.jsx)(h.Badge,{variant:"gray",children:a.categories?.name||"-"})}),(0,b.jsx)("td",{className:"py-3 px-6 font-medium text-gray-900 max-w-md truncate",children:a.text}),(0,b.jsx)("td",{className:"py-3 px-6",children:(0,b.jsxs)(h.Badge,{variant:d>0?"success":"warning",children:[d," cevap"]})}),(0,b.jsx)("td",{className:"py-3 px-6 text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)("button",{onClick:()=>{K(a.id),r("answers")},className:"p-2 text-gray-400 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg",title:"CevaplarÄ± GÃ¶r",children:(0,b.jsx)(p.ChevronRight,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>Z("questions",a),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",children:(0,b.jsx)(l.Edit2,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>_("questions",a.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:(0,b.jsx)(m.Trash2,{className:"w-4 h-4"})})]})})]},a.id)})})]})})]}),"answers"===a&&(0,b.jsxs)(d.Card,{children:[(0,b.jsxs)(d.CardHeader,{children:[(0,b.jsx)(d.CardTitle,{children:"âœ… Cevaplar"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(g.Select,{options:B.map(a=>({value:a.id,label:a.text.substring(0,50)+"..."})),value:J,onChange:a=>K(a.target.value),placeholder:"Soru SeÃ§in",className:"w-72"}),(0,b.jsxs)(e.Button,{onClick:()=>Z("answers"),children:[(0,b.jsx)(k.Plus,{className:"w-4 h-4"}),"Yeni Cevap"]})]})]}),(0,b.jsx)(d.CardBody,{className:"p-0",children:J?(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-50 border-b border-gray-100",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"text-left py-3 px-6 font-semibold text-gray-600 text-sm",children:"#"}),(0,b.jsx)("th",{className:"text-left py-3 px-6 font-semibold text-gray-600 text-sm",children:"Cevap Metni"}),(0,b.jsx)("th",{className:"text-center py-3 px-6 font-semibold text-gray-600 text-sm",children:"STD Puan"}),(0,b.jsx)("th",{className:"text-center py-3 px-6 font-semibold text-gray-600 text-sm",children:"REEL Puan"}),(0,b.jsx)("th",{className:"text-right py-3 px-6 font-semibold text-gray-600 text-sm",children:"Ä°ÅŸlem"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-100",children:Y.map((a,c)=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"py-3 px-6 text-gray-500",children:a.order_num||c+1}),(0,b.jsx)("td",{className:"py-3 px-6 font-medium text-gray-900",children:a.text}),(0,b.jsx)("td",{className:"py-3 px-6 text-center",children:(0,b.jsx)(h.Badge,{variant:"info",children:a.std_score})}),(0,b.jsx)("td",{className:"py-3 px-6 text-center",children:(0,b.jsx)(h.Badge,{variant:"success",children:a.reel_score})}),(0,b.jsx)("td",{className:"py-3 px-6 text-right",children:(0,b.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,b.jsx)("button",{onClick:()=>Z("answers",a),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg",children:(0,b.jsx)(l.Edit2,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>_("answers",a.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg",children:(0,b.jsx)(m.Trash2,{className:"w-4 h-4"})})]})})]},a.id))})]}):(0,b.jsx)("div",{className:"py-12 text-center text-gray-500",children:"CevaplarÄ± gÃ¶rmek iÃ§in yukarÄ±dan soru seÃ§in"})})]})]}),L&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:P?"DÃ¼zenle":"Yeni Ekle"}),(0,b.jsx)("button",{onClick:()=>M(!1),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:(0,b.jsx)(n.X,{className:"w-5 h-5"})})]}),(0,b.jsxs)("div",{className:"p-6 space-y-4",children:["main"===N&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(f.Input,{label:"Ana BaÅŸlÄ±k AdÄ± *",value:T.name||"",onChange:a=>U({...T,name:a.target.value}),placeholder:"Ã–rn: KiÅŸisel GeliÅŸim DeÄŸerlendirmesi"}),(0,b.jsx)(f.Input,{label:"AÃ§Ä±klama",value:T.description||"",onChange:a=>U({...T,description:a.target.value}),placeholder:"Opsiyonel aÃ§Ä±klama"}),(0,b.jsx)(g.Select,{label:"Durum",options:[{value:"active",label:"âœ… Aktif"},{value:"inactive",label:"âŒ Pasif"}],value:T.status||"active",onChange:a=>U({...T,status:a.target.value})})]}),"categories"===N&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Select,{label:"Ana BaÅŸlÄ±k *",options:x.map(a=>({value:a.id,label:a.name})),value:T.main_category_id||"",onChange:a=>U({...T,main_category_id:a.target.value}),placeholder:"Ana BaÅŸlÄ±k SeÃ§in"}),(0,b.jsx)(f.Input,{label:"Kategori AdÄ± *",value:T.name||"",onChange:a=>U({...T,name:a.target.value}),placeholder:"Ã–rn: Liderlik ve YÃ¶netim"})]}),"questions"===N&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Select,{label:"Kategori *",options:z.map(a=>({value:a.id,label:`${a.main_categories?.name} > ${a.name}`})),value:T.category_id||"",onChange:a=>U({...T,category_id:a.target.value}),placeholder:"Kategori SeÃ§in"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Soru Metni *"}),(0,b.jsx)("textarea",{value:T.text||"",onChange:a=>U({...T,text:a.target.value}),placeholder:"Soru metnini yazÄ±n...",rows:3,className:"w-full px-4 py-2.5 text-sm border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"})]}),(0,b.jsx)(f.Input,{label:"SÄ±ra No",type:"number",value:T.order_num||1,onChange:a=>U({...T,order_num:parseInt(a.target.value)})})]}),"answers"===N&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g.Select,{label:"Soru *",options:B.map(a=>({value:a.id,label:a.text.substring(0,60)+"..."})),value:T.question_id||"",onChange:a=>U({...T,question_id:a.target.value}),placeholder:"Soru SeÃ§in"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Cevap Metni *"}),(0,b.jsx)("textarea",{value:T.text||"",onChange:a=>U({...T,text:a.target.value}),placeholder:"Cevap metnini yazÄ±n...",rows:3,className:"w-full px-4 py-2.5 text-sm border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsx)(f.Input,{label:"STD Puan",type:"number",min:1,max:5,value:T.std_score||1,onChange:a=>U({...T,std_score:parseInt(a.target.value)})}),(0,b.jsx)(f.Input,{label:"REEL Puan",type:"number",min:1,max:5,value:T.reel_score||1,onChange:a=>U({...T,reel_score:parseInt(a.target.value)})}),(0,b.jsx)(f.Input,{label:"SÄ±ra No",type:"number",value:T.order_num||1,onChange:a=>U({...T,order_num:parseInt(a.target.value)})})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-end gap-3 p-6 border-t border-gray-100",children:[(0,b.jsx)(e.Button,{variant:"secondary",onClick:()=>M(!1),children:"Ä°ptal"}),(0,b.jsx)(e.Button,{onClick:$,disabled:R,children:R?(0,b.jsx)(o.Loader2,{className:"w-5 h-5 animate-spin"}):"Kaydet"})]})]})})]})}a.s(["default",()=>v],45803)}];

//# sourceMappingURL=src_app_%28admin%29_admin_questions_page_tsx_b9c6e812._.js.map