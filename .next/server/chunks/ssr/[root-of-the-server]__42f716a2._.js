module.exports=[36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},96221,a=>{"use strict";let b=(0,a.i(70106).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},50429,a=>{"use strict";let b=(0,a.i(70106).default)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);a.s(["Target",()=>b],50429)},46058,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},39118,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},NOT_FOUND_SEGMENT_KEY:function(){return m},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__",m="/_not-found"},46842,a=>{"use strict";let b=(0,a.i(70106).default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);a.s(["User",()=>b],46842)},50522,a=>{"use strict";let b=(0,a.i(70106).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);a.s(["ChevronRight",()=>b],50522)},81496,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(11909);var e=a.i(91119),f=a.i(99570),g=a.i(86304),h=a.i(69769),i=a.i(10849),j=a.i(50522),k=a.i(70106);let l=(0,k.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),m=(0,k.default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var n=a.i(96221),o=a.i(46842),p=a.i(50429);function q(){let a=(0,d.useParams)(),k=(0,d.useRouter)(),q=a.slug,[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)({}),[x,y]=(0,c.useState)({}),[z,A]=(0,c.useState)(!0),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(0);(0,c.useEffect)(()=>{F()},[q]);let F=async()=>{try{let a=i.supabase.from("evaluation_assignments").select(`
          *,
          evaluator:evaluator_id(name),
          target:target_id(name, department),
          evaluation_periods(name, status)
        `),{data:b}=await a.eq("slug",q).single();if(!b){let{data:c}=await a.eq("id",q).single();b=c}if(!b){(0,h.toast)("DeÄŸerlendirme bulunamadÄ±","error"),k.push("/dashboard/evaluations");return}if("completed"===b.status){(0,h.toast)("Bu deÄŸerlendirme zaten tamamlanmÄ±ÅŸ","info"),k.push("/dashboard/evaluations");return}if(b.evaluation_periods?.status!=="active"){(0,h.toast)("Bu deÄŸerlendirme dÃ¶nemi aktif deÄŸil","error"),k.push("/dashboard/evaluations");return}s(b);let{data:c}=await i.supabase.from("questions").select(`
          *,
          categories(
            name,
            main_categories(name, status)
          )
        `).order("order_num"),d=(c||[]).filter(a=>a.categories?.main_categories?.status==="active");u(d);let e=d.map(a=>a.id),{data:f}=await i.supabase.from("answers").select("*").in("question_id",e).order("order_num"),g={};(f||[]).forEach(a=>{g[a.question_id]||(g[a.question_id]=[]),g[a.question_id].push(a)}),w(g)}catch(a){console.error("Load error:",a),(0,h.toast)("Veri yÃ¼klenirken hata oluÅŸtu","error")}finally{A(!1)}},G=async()=>{if(!r)return;let a=t.filter(a=>!x[a.id]||0===x[a.id].length);if(a.length>0){(0,h.toast)(`${a.length} soru cevaplanmamÄ±ÅŸ`,"error"),E(t.findIndex(a=>!x[a.id]||0===x[a.id].length));return}C(!0);try{let a=t.map(a=>{let b=x[a.id]||[],c=(v[a.id]||[]).filter(a=>b.includes(a.id)),d=c.reduce((a,b)=>a+b.std_score,0)/c.length||0,e=c.reduce((a,b)=>a+b.reel_score,0)/c.length||0;return{assignment_id:r.id,question_id:a.id,answer_ids:b,std_score:d,reel_score:e,category_name:a.categories?.name||null}}),{error:b}=await i.supabase.from("evaluation_responses").insert(a);if(b)throw b;let{error:c}=await i.supabase.from("evaluation_assignments").update({status:"completed",completed_at:new Date().toISOString()}).eq("id",r.id);if(c)throw c;(0,h.toast)("DeÄŸerlendirme baÅŸarÄ±yla kaydedildi! ðŸŽ‰","success"),setTimeout(()=>{k.push("/dashboard/evaluations")},1500)}catch(a){console.error("Submit error:",a),(0,h.toast)(a.message||"KayÄ±t hatasÄ±","error")}finally{C(!1)}},H=t[D],I=H&&v[H.id]||[],J=H&&x[H.id]||[],K=t.length>0?Math.round(Object.keys(x).filter(a=>x[a].length>0).length/t.length*100):0,L=r?.evaluator_id===r?.target_id;return z?(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:[(0,b.jsx)(h.ToastContainer,{}),(0,b.jsx)(n.Loader2,{className:"w-8 h-8 animate-spin text-blue-600"})]}):r&&0!==t.length?(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 py-8 px-4",children:[(0,b.jsx)(h.ToastContainer,{}),(0,b.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,b.jsxs)("div",{className:"text-center mb-8",children:[(0,b.jsx)("div",{className:"inline-flex items-center justify-center w-14 h-14 bg-gradient-to-br from-amber-400 to-amber-500 rounded-2xl shadow-lg mb-4",children:(0,b.jsx)("span",{className:"text-xl font-bold text-slate-900",children:"V"})}),(0,b.jsx)("h1",{className:"text-2xl font-bold text-white",children:"VISIO 360Â°"}),(0,b.jsx)("p",{className:"text-blue-200 mt-1",children:r.evaluation_periods?.name})]}),(0,b.jsx)(e.Card,{className:"mb-6",children:(0,b.jsx)(e.CardBody,{children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:`w-14 h-14 rounded-xl flex items-center justify-center ${L?"bg-blue-100 text-blue-600":"bg-amber-100 text-amber-600"}`,children:L?(0,b.jsx)(o.User,{className:"w-7 h-7"}):(0,b.jsx)(p.Target,{className:"w-7 h-7"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:L?"Ã–z DeÄŸerlendirme":"DeÄŸerlendirilen KiÅŸi"}),(0,b.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:r.target?.name}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:r.target?.department})]})]}),(0,b.jsx)("div",{className:"text-right",children:(0,b.jsx)(g.Badge,{variant:L?"info":"default",children:L?"ðŸ”µ Ã–z DeÄŸerlendirme":"ðŸ‘¥ Peer DeÄŸerlendirme"})})]})})}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-white text-sm mb-2",children:[(0,b.jsxs)("span",{children:["Ä°lerleme: ",D+1," / ",t.length]}),(0,b.jsxs)("span",{children:["%",K," tamamlandÄ±"]})]}),(0,b.jsx)("div",{className:"bg-white/20 rounded-full h-2 overflow-hidden",children:(0,b.jsx)("div",{className:"bg-gradient-to-r from-amber-400 to-amber-500 h-full transition-all duration-300",style:{width:`${K}%`}})})]}),(0,b.jsxs)(e.Card,{className:"mb-6",children:[(0,b.jsx)(e.CardHeader,{className:"border-b border-gray-100",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)(g.Badge,{variant:"gray",className:"mb-2",children:[H?.categories?.main_categories?.name," â€º ",H?.categories?.name]}),(0,b.jsxs)(e.CardTitle,{className:"text-lg",children:["Soru ",D+1]})]})}),(0,b.jsxs)(e.CardBody,{children:[(0,b.jsx)("p",{className:"text-gray-900 text-lg mb-6",children:H?.text}),(0,b.jsx)("div",{className:"space-y-3",children:I.map(a=>{let c=J.includes(a.id);return(0,b.jsx)("button",{onClick:()=>{var b,c;return b=H.id,c=a.id,void y(a=>({...a,[b]:[c]}))},className:`w-full p-4 rounded-xl border-2 text-left transition-all ${c?"border-blue-500 bg-blue-50 text-blue-900":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${c?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:c&&(0,b.jsx)(m,{className:"w-4 h-4 text-white"})}),(0,b.jsx)("span",{className:"flex-1",children:a.text}),c&&(0,b.jsx)(g.Badge,{variant:"info",className:"ml-2",children:"SeÃ§ildi"})]})},a.id)})})]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)(f.Button,{variant:"secondary",onClick:()=>E(a=>Math.max(0,a-1)),disabled:0===D,children:[(0,b.jsx)(l,{className:"w-5 h-5"}),"Ã–nceki"]}),D===t.length-1?(0,b.jsx)(f.Button,{variant:"success",onClick:G,disabled:B,children:B?(0,b.jsx)(n.Loader2,{className:"w-5 h-5 animate-spin"}):(0,b.jsxs)(b.Fragment,{children:["GÃ¶nder",(0,b.jsx)(m,{className:"w-5 h-5"})]})}):(0,b.jsxs)(f.Button,{onClick:()=>E(a=>Math.min(t.length-1,a+1)),children:["Sonraki",(0,b.jsx)(j.ChevronRight,{className:"w-5 h-5"})]})]}),(0,b.jsxs)("div",{className:"mt-8",children:[(0,b.jsx)("p",{className:"text-white/60 text-sm text-center mb-3",children:"HÄ±zlÄ± GeÃ§iÅŸ"}),(0,b.jsx)("div",{className:"flex flex-wrap justify-center gap-2",children:t.map((a,c)=>{let d=x[a.id]&&x[a.id].length>0,e=c===D;return(0,b.jsx)("button",{onClick:()=>E(c),className:`w-10 h-10 rounded-lg font-medium text-sm transition-all ${e?"bg-amber-500 text-white":d?"bg-emerald-500 text-white":"bg-white/10 text-white/60 hover:bg-white/20"}`,children:c+1},a.id)})})]})]})]}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:[(0,b.jsx)(h.ToastContainer,{}),(0,b.jsx)(e.Card,{className:"max-w-md",children:(0,b.jsxs)(e.CardBody,{className:"text-center py-12",children:[(0,b.jsx)("p",{className:"text-gray-500",children:"DeÄŸerlendirme bulunamadÄ± veya soru yok"}),(0,b.jsx)(f.Button,{className:"mt-4",onClick:()=>k.push("/dashboard/evaluations"),children:"Geri DÃ¶n"})]})})]})}a.s(["default",()=>q],81496)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__42f716a2._.js.map